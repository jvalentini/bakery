# <%= projectName %>

<%= description %>

A full-stack application built with the **Effect Stack**:

- **Effect-ts** - Type-safe functional programming
- **Convex** - Real-time database with automatic subscriptions
- **TanStack Start** - Full-stack routing framework
- **TanStack Query** - Data fetching and state management

## Project Structure

```
<%= projectName %>/
├── convex/                 # Convex schema and functions
│   ├── schema.ts          # Database schema
│   └── messages.ts        # Message mutations/queries
├── packages/
│   ├── api/               # Effect services and types
│   │   └── src/effects/   # Effect service definitions
│   └── web/               # TanStack Start frontend
│       └── src/routes/    # File-based routing
├── package.json           # Root workspace config
└── README.md
```

## Prerequisites

1. Create a Convex account at [convex.dev](https://convex.dev)
2. Set up your Convex project

## Getting Started

```bash
# Install dependencies
make install

# Initialize Convex (first time setup)
# This will prompt you to log in or create a Convex account,
# then generate type-safe code in convex/_generated/
bunx convex dev --once

# The Convex URL is automatically saved to .env.local
# Start development (runs both Convex and web servers)
make dev
```

> **Note:** The first time you run `bunx convex dev`, Convex will generate
> TypeScript types in `convex/_generated/`. This project includes stub types
> so it typechecks before setup, but you must run Convex to get full type safety.

## Development

```bash
bun run dev          # Start Convex + web dev servers
bun run dev:convex   # Start Convex dev server only
bun run dev:web      # Start web dev server only
bun run build        # Build for production
bun run test         # Run tests
bun run check        # Run all checks
```

## Effect-ts Patterns

This template demonstrates:

- **Schema validation** - Runtime type validation with Effect Schema
- **Service layers** - Dependency injection with Context.Tag
- **Effect composition** - Generator-based effect composition
- **Error handling** - Type-safe error handling

Example Effect service usage:

```typescript
import { Effect, pipe } from 'effect';
import { MessageService, MessageServiceLive } from '@<%= projectName %>/api/effects/message';

const program = Effect.gen(function* () {
  const service = yield* MessageService;
  const validated = yield* service.validate(input);
  return validated;
});

const result = await pipe(
  program,
  Effect.provide(MessageServiceLive),
  Effect.runPromise
);
```

## Convex Real-time

Convex provides automatic real-time subscriptions:

```typescript
// Automatically updates when data changes
const messages = useQuery(api.messages.list, { limit: 20 });

// Type-safe mutations
const sendMessage = useMutation(api.messages.send);
await sendMessage({ text: 'Hello!', author: 'Alice' });
```

## Learn More

- [Effect Documentation](https://effect.website/docs/introduction)
- [Convex Documentation](https://docs.convex.dev)
- [TanStack Start](https://tanstack.com/start)
- [TanStack Query](https://tanstack.com/query)

## License

<%= license %><% if (author) { %> - <%= author %><% } %>
